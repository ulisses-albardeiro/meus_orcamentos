{% extends 'base.html' %}
{% block conteudo %}

<style>
  @media (max-width: 768px) {
    .margem {
      margin-bottom: 20px !important;
    }
  }

  @media (min-width: 1024px) {
    .margem {
      padding-right: 20px !important;
    }
  }



  .lista-orcamentos {
    max-height: 300px;
    /* Altura para aproximadamente 4 itens */
    overflow-y: auto;
  }

  /* Personalização da scrollbar para navegadores WebKit */
  .lista-orcamentos::-webkit-scrollbar {
    width: 6px;
  }

  .lista-orcamentos::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 10px;
  }

  .lista-orcamentos::-webkit-scrollbar-thumb {
    background: #52D8B0;
    border-radius: 10px;
  }

  .lista-orcamentos::-webkit-scrollbar-thumb:hover {
    background: #52D8B0;
  }

  /* Para Firefox */
  .lista-orcamentos {
    scrollbar-width: thin;
    scrollbar-color: #52D8B0 #f1f1f1;
  }
</style>

<!-- row 1 -->
<h4>Resumo financeiro</h4>
<div class="flex flex-wrap -mx-3">
  <!-- card1 -->
  <div class="w-full max-w-full px-3 mb-6 sm:w-1/2 sm:flex-none xl:mb-0 xl:w-1/4">
    <div class="relative flex flex-col min-w-0 break-words bg-white shadow-soft-xl rounded-2xl bg-clip-border">
      <div class="flex-auto p-4">
        <div class="flex flex-row -mx-3">
          <div class="flex-none w-2/3 max-w-full px-3">
            <div>
              <p class="mb-0 font-sans text-sm font-semibold leading-normal">Saldo do mês</p>
              <h5 class="mb-0 font-bold">
                R$ {{ totalCaixaMesAtual | number_format(2, ',', '.') }}
              </h5>
            </div>
          </div>
          <div class="px-3 text-right basis-1/3">
            <div class="inline-block w-12 h-12 text-center rounded-lg bg-gradient-to-tl from-purple-700 to-pink-500">
              <i class="ni leading-none ni-money-coins text-lg relative top-3.5 text-black"></i>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- card2 -->
  <div class="w-full max-w-full px-3 mb-6 sm:w-1/2 sm:flex-none xl:mb-0 xl:w-1/4">
    <div class="relative flex flex-col min-w-0 break-words bg-white shadow-soft-xl rounded-2xl bg-clip-border">
      <div class="flex-auto p-4">
        <div class="flex flex-row -mx-3">
          <div class="flex-none w-2/3 max-w-full px-3">
            <div>
              <p class="mb-0 font-sans text-sm font-semibold leading-normal">Receitas do Mês</p>
              <h5 class="mb-0 font-bold">
                R$ {{ totalReceitaMesAtual | number_format(2, ',', '.') }}
              </h5>
            </div>
          </div>
          <div class="px-3 text-right basis-1/3">
            <div class="inline-block w-12 h-12 text-center rounded-lg bg-gradient-to-tl from-purple-700 to-pink-500">
              <i class="fa-solid fa-chart-line leading-none text-lg relative top-3.5 text-black"></i>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- card3 -->
  <div class="w-full max-w-full px-3 mb-6 sm:w-1/2 sm:flex-none xl:mb-0 xl:w-1/4">
    <div class="relative flex flex-col min-w-0 break-words bg-white shadow-soft-xl rounded-2xl bg-clip-border">
      <div class="flex-auto p-4">
        <div class="flex flex-row -mx-3">
          <div class="flex-none w-2/3 max-w-full px-3">
            <div>
              <p class="mb-0 font-sans text-sm font-semibold leading-normal">Despesas do Mês</p>
              <h5 class="mb-0 font-bold">
                R$ {{ totalDespesasMesAtual | number_format(2, ',', '.') }}
              </h5>
            </div>
          </div>
          <div class="px-3 text-right basis-1/3">
            <div class="inline-block w-12 h-12 text-center rounded-lg bg-gradient-to-tl from-purple-700 to-pink-500">
              <i class="ni leading-none ni-chart-bar-32 text-lg relative top-3.5 text-black"></i>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- card4 -->
  <div class="w-full max-w-full px-3 sm:w-1/2 sm:flex-none xl:w-1/4">
    <div class="relative flex flex-col min-w-0 break-words bg-white shadow-soft-xl rounded-2xl bg-clip-border">
      <div class="flex-auto p-4">
        <div class="flex flex-row -mx-3">
          <div class="flex-none w-2/3 max-w-full px-3">
            <div>
              <p class="mb-0 font-sans text-sm font-semibold leading-normal">Margem</p>
              <h5 class="mb-0 font-bold">
                {{ margemDoMes }} %
              </h5>
            </div>
          </div>
          <div class="px-3 text-right basis-1/3">
            <div class="inline-block w-12 h-12 text-center rounded-lg bg-gradient-to-tl from-purple-700 to-pink-500">
              <i class="ni leading-none ni-chart-pie-35 text-lg relative top-3.5 text-black"></i>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="w-full py-6">
  <!-- dados pessoais -->
  <div class="flex flex-wrap">
    <div class="lg:w-2/3 margem">
      <div class="w-full max-w-full lg-max:mt-6 xl:w-8/12">
        <div
          class="relative flex flex-col h-full min-w-0 break-words bg-white border-0 shadow-soft-xl rounded-2xl bg-clip-border">
          <div class="p-4 pb-0 mb-0 bg-white border-b-0 rounded-t-2xl">
            <div class="flex flex-wrap -mx-3">
              <div class="flex items-center w-full max-w-full px-3 shrink-0 md:w-8/12 md:flex-none">
                <h6 class="mb-0">Informações do Perfil</h6>
              </div>
              <div class="w-full max-w-full px-3 text-right shrink-0 md:w-4/12 md:flex-none">
                <a href="{{url('perfil')}}" data-target="tooltip_trigger" data-placement="top">
                  <i class="leading-normal fas fa-user-edit text-sm text-slate-400"></i>
                </a>
                <div data-target="tooltip" class="hidden px-2 py-1 text-center text-white bg-black rounded-lg text-sm"
                  role="tooltip">
                  Editar Perfil
                  <div
                    class="invisible absolute h-2 w-2 bg-inherit before:visible before:absolute before:h-2 before:w-2 before:rotate-45 before:bg-inherit before:content-['']"
                    data-popper-arrow></div>
                </div>
              </div>
            </div>
          </div>
          <div class="flex-auto p-4">
            <img style="max-width: 120px;" src="{{url('templates/assets/img/logos/'~usuario().img_logo)}}" alt="">

            <hr class="h-px my-6 bg-transparent bg-gradient-to-r from-transparent via-white to-transparent" />
            <ul class="flex flex-col pl-0 mb-0 rounded-lg">
              <li
                class="relative block px-4 py-2 pt-0 pl-0 leading-normal bg-white border-0 rounded-t-lg text-sm text-inherit">
                <strong class="text-slate-700">Nome:</strong> &nbsp; {{usuario().nome}}
              </li>
              <li
                class="relative block px-4 py-2 pl-0 leading-normal bg-white border-0 border-t-0 text-sm text-inherit">
                <strong class="text-slate-700">Celular:</strong> &nbsp; {{usuario().telefone}}
              </li>
              <li
                class="relative block px-4 py-2 pl-0 leading-normal bg-white border-0 border-t-0 text-sm text-inherit">
                <strong class="text-slate-700">Email:</strong> &nbsp; {{usuario().email}}
              </li>
              <li
                class="relative block px-4 py-2 pl-0 leading-normal bg-white border-0 border-t-0 text-sm text-inherit">
                <strong class="text-slate-700">CNPJ:</strong> &nbsp; {{usuario().cnpj}}
              </li>
              <li
                class="relative block px-4 py-2 pl-0 leading-normal bg-white border-0 border-t-0 text-sm text-inherit">
                <strong class="text-slate-700">Endereço:</strong> &nbsp; {{usuario().endereco}}
              </li>
              <li class="relative block px-4 py-2 pb-0 pl-0 bg-white border-0 border-t-0 rounded-b-lg text-inherit">
                <strong class="leading-normal text-sm text-slate-700">Instagram:</strong> &nbsp;
                <a class="inline-block py-0 pl-1 pr-2 mb-0 font-bold text-center align-middle transition-all bg-transparent border-0 rounded-lg shadow-none cursor-pointer leading-pro text-xs ease-soft-in bg-none text-sky-900"
                  href="javascript:;">
                  <i class="fab fa-instagram fa-lg"></i>
                  {{usuario().instagram}}
                </a>
              </li>
              <li class="relative block px-4 py-2 pb-0 pl-0 bg-white border-0 border-t-0 rounded-b-lg text-inherit">
                <strong class="leading-normal text-sm text-slate-700">Facebook:</strong> &nbsp;
                <a class="inline-block py-0 pl-1 pr-2 mb-0 font-bold text-center text-blue-800 align-middle transition-all bg-transparent border-0 rounded-lg shadow-none cursor-pointer leading-pro text-xs ease-soft-in bg-none"
                  href="javascript:;">
                  <i class="fab fa-facebook fa-lg"></i>
                  {{usuario().facebook}}
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!-- tabela -->
    <div class="w-full max-w-full lg:px-3 lg:w-1/3 lg:flex-none">
      <color:div
        class="relative flex flex-col h-full min-w-0 break-words bg-white border-0 border-transparent border-solid shadow-soft-xl rounded-2xl bg-clip-border">
        <div class="p-4 pb-0 mb-0 bg-white border-b-0 border-b-solid rounded-t-2xl border-b-transparent">
          <div class="flex flex-wrap -mx-3">
            <div class="flex items-center flex-none w-1/2 max-w-full px-3">
              <h6 class="mb-0">Orçamentos</h6>
            </div>
            <div class="flex-none w-1/2 max-w-full px-3 text-right">
              <a href="{{url('orcamento/listar')}}"
                class="inline-block px-8 py-2 mb-0 font-bold text-center uppercase align-middle transition-all bg-transparent border border-solid rounded-lg shadow-none cursor-pointer leading-pro ease-soft-in text-xs bg-150 active:opacity-85 hover:scale-102 tracking-tight-soft bg-x-25 border-black-500 text-black hover:opacity-75">Ver
                Todos</a>
            </div>
          </div>
        </div>
        <div class="flex-auto p-4 pb-0">
          <ul class="flex flex-col pl-0 mb-0 rounded-lg lista-orcamentos">
            {% for orcamento in orcamentos %}
            <li
              class="relative flex justify-between px-4 py-2 pl-0 mb-2 bg-white border-0 rounded-t-inherit text-inherit rounded-xl">
              <div class="flex flex-col">
                <h6 class="mb-1 font-semibold leading-normal text-sm text-slate-700">{{ orcamento.nome_cliente}}</h6>
                <span class="leading-tight text-xs">{{ orcamento.dt_hr_criacao | date('d/m/Y') }}</span>
              </div>
              <div class="flex items-center leading-normal text-sm">
                R$ {{ orcamento.vl_total | number_format(2, ',', '.')}}
                <a href="{{url('orcamento/'~orcamento.modelo~'/'~orcamento.hash)}}" target="_blank"
                  class="inline-block px-0 py-3 mb-0 ml-6 font-bold leading-normal text-center uppercase align-middle transition-all bg-transparent border-0 rounded-lg shadow-none cursor-pointer ease-soft-in bg-150 text-sm active:opacity-85 hover:scale-102 tracking-tight-soft bg-x-25 text-slate-700"><i
                    class="mr-1 fas fa-eye text-lg"></i> VER</a>
              </div>
            </li>
            {% endfor %}
          </ul>
        </div>
      </color:div>
    </div>
  </div>
  {% endblock %}